%!TEX root = ../thesis.tex
% ******************************* Thesis Appendix A ****************************
\definecolor{mGreen}{rgb}{0,0.6,0}
\definecolor{mGray}{rgb}{0.5,0.5,0.5}
\definecolor{mPurple}{rgb}{0.58,0,0.82}
\definecolor{backgroundColour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{CStyle}{
	backgroundcolor=\color{backgroundColour},   
	commentstyle=\color{mGreen},
	keywordstyle=\color{magenta},
	numberstyle=\tiny\color{mGray},
	stringstyle=\color{mPurple},
	basicstyle=\footnotesize,
	breakatwhitespace=false,         
	breaklines=true,                 
	captionpos=b,                    
	keepspaces=true,                 
	numbers=left,                    
	numbersep=5pt,                  
	showspaces=false,                
	showstringspaces=false,
	showtabs=false,                  
	tabsize=2,
	language=C
}


\lstdefinestyle{CMakeStyle}{
	backgroundcolor=\color{backgroundColour},   
	basicstyle=\footnotesize,
	breakatwhitespace=false,         
	breaklines=true,                 
	captionpos=b,                    
	keepspaces=true,                 
	numbers=left,                    
	numbersep=5pt,                  
	showspaces=false,                
	showstringspaces=false,
	showtabs=false,                  
	tabsize=2,
}

\ifpdf
\graphicspath{{Appendix1/figs/}}
\else
\graphicspath{{Appendix1/figs/}}
\fi

\chapter{Percolation} 
\section{Algorithm}

	The UML diagram for the program is 
	\begin{figure}
		\centering
		\includegraphics[width=16cm]{{{ClassDiagram2}}}
		\caption{Schematic UML diagram for Site Percolation Ballistic Deposition program. This figure shows the dependencies and inheritance os the Classes and Structs in the program.}
	\end{figure}

\section{Code}
	
	Each header file starts with a directive \textit{\#ifndef} and \textit{\#define}, which is necessary because one header file is needed multiple times and including it more than once results in error. These directive prevents it. Of course this directive must be closed by \textit{\#endif}.
	
	
	\subsection{Index}
	Here the notion of index of site and index of bond is defined. Site index has two element which determine row and column. Bond Index had three element describing bond type, row, column. Bond type can be horizontal or vertical.
	\input{Appendix1/codes/index}	
	
	
	\subsection{Site}
	The site class contains all information about a site, e.g., if it is active or not and if it is then what is it's group id or relative index.
	\input{Appendix1/codes/site}
	
	\subsection{Bond}
	The bond class contains all information about a bond, e.g., if it is active or not and if it is then what is it's group id.
	\input{Appendix1/codes/bond}
			
	\subsection{Lattice}
	The lattice class consists of array of sites and bonds. This class contains information about lattice size. And contains functions to view the lattice differently in the console.
	\input{Appendix1/codes/lattice}
	
	\subsection{Exception}
	Different types of exceptions.
	\input{Appendix1/codes/exception}
	
	\subsection{Cluster}
	The cluster class contains all information about a cluster. Number of sites and bonds in a cluster and the id of the cluster is contained in a cluster.
	\input{Appendix1/codes/cluster}
	
	\subsection{Percolation}
	The \textit{SqLatticePercolation} class contains generic operation that to performed for percolation on square lattice. It's subclass  \textit{SitePercolation\_ps\_v9} is the class when all required method for general site percolation with our definition is defined. 
	And it's subclass \textit{SitePercolationBallisticDeposition\_v2}
	contains some method for ballistic deposition for $l=\{1,2\}$ which extends to two new subclass \textit{SitePercolationBallisticDeposition\_L1\_v2} and \textit{SitePercolationBallisticDeposition\_L2\_v2} with detailed method for ballistic deposition $l=1$ and $l=2$ respectively.
	
	\input{Appendix1/codes/percolation}
	\input{Appendix1/codes/site-percolation}
	
	\subsection{Utilities}
	We sometimes need to print an array, std::map, std::vector in the console. Some functions for this task is given here. 
	\input{Appendix1/codes/printer}
	
	When generating data file we need to name our data file uniquely so that when all of the data files are in one location, no confusion occurs. A good way to do this is to add the time and data stamp at the end of each data file. Although data filename does share a common pattern.
	\input{"Appendix1/codes/time_tracking"}
	\input{Appendix1/codes/type}
	
	\subsection{Tests}
	A template function is required to run for $l0, l1, l2$. The template argument is the class name. The other two argument is the length and ensemble size we need for one file. The three template arguments are
	\begin{enumerate}
		\item SitePercolation\_ps\_v9
		\item SitePercolationBallisticDeposition\_L1\_v2
		\item SitePercolationBallisticDeposition\_L1\_v2
	\end{enumerate}
	\input{Appendix1/codes/test}
	
	\subsection{Main}
	The main function receives 3 additional command line argument. First one is an integer $l\in\{0,1,2\}$ which determine the range of interaction. Second one is the length of the lattice. And third one is the size of the ensemble. For example, $1 200 5000$ will run the program for $l=1$, $L=200$ for ensemble size of $5000$.
	
	The \textit{run\_in\_main(int, char**)} function is the one where the  \textit{simulate\_site\_percolation\_T<>(size\_t, size\_t)} executes for different classes.
	
	\input{Appendix1/codes/main}
	
	\subsection{CMakeLists}
	All the header and source files are listed here and how the compiler should link them is generated by running cmake. \url{https://cmake.org/cmake-tutorial/}
	
	\input{Appendix1/codes/cmakelists}
	
	\subsection{complete code}
	Complete code for RSBD model on square lattice is available at
	\url{https://github.com/sha314/SqLattice_RSBD}
	or use the git link to clone the repository
	\url{https://github.com/sha314/SqLattice_RSBD.git}
	\\
	Detailed version of the same program with other extensions are available at
	\url{https://github.com/sha314/SqLatticePercolation}
	or the git link
	\url{https://github.com/sha314/SqLatticePercolation.git}



